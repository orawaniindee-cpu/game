<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Flappy Bird (Easy Mode)</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            font-family: Arial, Helvetica, sans-serif;
            -webkit-user-select: none;
            user-select: none;
        }

        .background {
            height: 100vh;
            width: 100vw;
            background-color: skyblue;
            background-size: cover;
            overflow: hidden;
            position: relative;
        }

        .bird {
            height: 50px;
            width: 60px;
            background-color: rgb(241, 157, 213);
            border: 2px solid black;
            border-radius: 50%;
            position: fixed;
            top: 40vh;
            left: 30vw;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.1s;
        }

        .bird::after {
            content: "";
            width: 15px;
            height: 15px;
            background: white;
            border-radius: 50%;
            border: 2px solid black;
            position: absolute;
            top: 5px;
            right: 10px;
        }
        .bird::before {
            content: "";
            width: 20px;
            height: 10px;
            background: rgb(165, 110, 216);
            position: absolute;
            top: 25px;
            right: -5px;
            border: 1px solid black;
        }

        .message {
            position: absolute;
            z-index: 10;
            top: 30%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            font-size: 2rem;
            color: black;
            background: rgba(255, 255, 255, 0.8);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            cursor: pointer;
        }

        .score_val {
            position: fixed;
            top: 40px;
            left: 20px;
            font-size: 2rem;
            color: white;
            z-index: 100;
            font-weight: bold;
            text-shadow: 2px 2px 0 #000;
        }

        .pipe_sprite {
            position: fixed;
            top: 0;
            width: 15vw;
            max-width: 80px;
            background: radial-gradient(lightgreen 50%, green);
            border: 3px solid black;
            z-index: 1;
        }
    </style>
</head>
<body>

    <div class="background">
        <div class="score_val">Score: 0</div>
        <div class="message">
            Tap Screen <br> (Easy Mode)
        </div>
        <div class="bird"></div>
    </div>

    <script>
        // --- Game Variables (ปรับให้ง่ายที่นี่) ---
        let move_speed = 2;   // ลดความเร็วจาก 3 เหลือ 2
        let gravity = 0.3;    // ลดแรงดึงดูดจาก 0.5 เหลือ 0.3 (ตกช้าลง)
        let gap_size = 35;    // เพิ่มช่องว่างระหว่างท่อ (35vh) กว้างมาก!
        
        let bird = document.querySelector('.bird');
        let bird_props = bird.getBoundingClientRect();
        let background = document.querySelector('.background').getBoundingClientRect();
        let score_val = document.querySelector('.score_val');
        let message = document.querySelector('.message');
        
        let game_state = 'Start';
        let img_dy = 0;

        function startGame() {
            if(game_state != 'Play'){
                document.querySelectorAll('.pipe_sprite').forEach((e) => {
                    e.remove();
                });
                img_dy = 0;
                bird.style.top = '40vh';
                game_state = 'Play';
                message.style.display = 'none';
                score_val.innerHTML = 'Score: 0';
                play();
            }
        }

        function jump() {
            if(game_state === 'Play'){
                img_dy = -6; // ปรับแรงโดดให้เข้ากับแรงโน้มถ่วงใหม่
                bird.style.transform = 'rotate(-20deg)';
                setTimeout(() => {
                    bird.style.transform = 'rotate(0deg)';
                }, 100);
            }
        }

        // --- Event Listeners ---
        document.addEventListener('touchstart', (e) => {
            if(game_state != 'Play') startGame();
            else jump();
        });

        document.addEventListener('keydown', (e) => {
            if(e.key == 'Enter' && game_state != 'Play') startGame();
            if((e.key == ' ' || e.key == 'ArrowUp') && game_state == 'Play') jump();
        });

        document.addEventListener('mousedown', (e) => {
             if(game_state != 'Play') startGame();
             else jump();
        });

        // --- Main Game Loop ---
        function play(){
            function move(){
                if(game_state != 'Play') return;

                let pipe_sprite = document.querySelectorAll('.pipe_sprite');
                
                // สร้างท่อ
                if(pipe_sprite.length == 0 || pipe_sprite[pipe_sprite.length - 1].getBoundingClientRect().right < window.innerWidth - 300){
                    
                    let pipe_element = document.createElement('div');
                    pipe_element.className = 'pipe_sprite';
                    // สุ่มความสูงท่อบน (ลดความสูงลงเพื่อให้ช่องกว้างขึ้น)
                    let pipe_height = Math.floor(Math.random() * 30) + 10; 
                    pipe_element.style.height = pipe_height + 'vh';
                    pipe_element.style.left = '100vw';
                    pipe_element.style.top = '0';
                    document.body.appendChild(pipe_element);

                    let pipe_bottom = document.createElement('div');
                    pipe_bottom.className = 'pipe_sprite';
                    // คำนวณความสูงท่อล่าง โดยอิงจาก gap_size ที่กว้างขึ้น
                    pipe_bottom.style.height = (100 - pipe_height - gap_size) + 'vh'; 
                    pipe_bottom.style.left = '100vw';
                    pipe_bottom.style.bottom = '0';
                    pipe_bottom.style.top = 'auto'; 
                    document.body.appendChild(pipe_bottom);
                }

                pipe_sprite.forEach((element) => {
                    let pipe_sprite_props = element.getBoundingClientRect();
                    bird_props = bird.getBoundingClientRect();

                    if(pipe_sprite_props.right <= 0){
                        element.remove();
                    }else{
                        // เช็คชน
                        if(bird_props.left < pipe_sprite_props.left + pipe_sprite_props.width && 
                           bird_props.left + bird_props.width > pipe_sprite_props.left && 
                           bird_props.top < pipe_sprite_props.top + pipe_sprite_props.height && 
                           bird_props.top + bird_props.height > pipe_sprite_props.top){
                            
                            gameOver();
                            return;
                        }else{
                            if(pipe_sprite_props.right < bird_props.left && pipe_sprite_props.right + move_speed >= bird_props.left && element.style.top === '0px'){
                                score_val.innerHTML = 'Score: ' + (parseInt(score_val.innerHTML.split(':')[1]) + 1);
                            }
                            element.style.left = pipe_sprite_props.left - move_speed + 'px';
                        }
                    }
                });
                requestAnimationFrame(move);
            }
            requestAnimationFrame(move);

            function apply_gravity(){
                if(game_state != 'Play') return;
                img_dy = img_dy + gravity;
                
                if(bird_props.top <= 0 || bird_props.bottom >= background.bottom){
                    gameOver();
                    return;
                }
                
                bird.style.top = (bird_props.top + img_dy) + 'px';
                bird_props = bird.getBoundingClientRect();
                requestAnimationFrame(apply_gravity);
            }
            requestAnimationFrame(apply_gravity);
        }

        function gameOver(){
            game_state = 'End';
            message.innerHTML = '<span style="color:red">Game Over</span><br>Tap to Restart';
            message.style.display = 'block';
        }

    </script>
</body>
</html>